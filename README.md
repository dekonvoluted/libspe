> This file is part of libSPE, a C++ library to interface with SPE files.
>
> Copyright (c) 2012,2013,2014,2015 Karthik Periagaram <dekonvoluted@gmail.com>
>
> libSPE is free software: you can redistribute it and/or modify
> it under the terms of the GNU General Public License as published by
> the Free Software Foundation, either version 3 of the License, or
> (at your option) any later version.
>
> libSPE is distributed in the hope that it will be useful,
> but WITHOUT ANY WARRANTY; without even the implied warranty of
> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
> GNU General Public License for more details.
>
> You should have received a copy of the GNU General Public License
> along with libSPE. If not, see <http://www.gnu.org/licenses/>.

# Background

SPE files are generated by Princeton Instruments camera software such as WinView, WinSpec, etc.
The data structure of an SPE file is published in either software's manual.
The latest published specification is for header version 2.5.

# Introduction

libSPE provides a convenient C++ API to access all data and metadata stored in SPE files.
SPE files with headers version 2.5 and earlier are supported.
Such files are typically written by WinView or WinSpec (software packages from Princeton Instruments).
SPE files written by LightField (another software package) uses version 3.0 headers and are not fully supported.

libSPE relies on Eigen, a fast and easy-to-use C++ linear algebra library, to store the image/spectrum data as a matrix/array.
More info on Eigen can be found on their project website, http://eigen.tuxfamily.org/.
This version of libSPE uses Eigen version 3.0.

libSPE uses CMake to build the shared library file.

# Documentation

The source code is thoroughly documented with doxygen comments.
Build documentation using the provided configuration file.

    doxygen Doxyfile
    xdg-open html/index.html

# Compiling libSPE

libSPE uses `cmake` to compile the shared library.
Follow these instructions from the top level directory,

    mkdir build/
    cd build/
    cmake ..
    make install
    cd ../

You should now find a `libspe.so` file in the top level directory.

# Using libSPE in your code

Using libSPE is pretty easy.
Include the header file in your code.

    #include <spe.h>

Create an `SPE::File` instance with the path to the SPE file.

    auto speFile = SPE::File( "/path/to/file.spe" );

You can immediately get the three important properties of the SPE file.

    auto rows = speFile.rows();
    auto cols = speFile.columns();
    auto frames = speFiles.frames();

You can fetch a frame by its frame number.
Note that libSPE always counts from 0.

    auto frame0 = speFile.getFrame( 0 );

You can get the average of all the frames in the SPE file.

    auto averageFrame = speFile.getAverageFrame();

The frame is an `Eigen::ArrayXXf` object.
Read the Eigen documentation to see how easy it is to manipulate these.

You can even access a specific pixel value directly, if you wanted to.

    auto firstPixel = speFile.getPixel( 0, 0, 0 ); // row, column, frame

A wealth of metadata about the experiment is buried in the header, all of which you can directly access through the metadata object.
The variables are named exactly as in the specification.
Note that the three important ones---`xdim`, `ydim` and `NumFrames`---are protected from direct access so you don't accidentally change them.
You can access them with a read-only API, `xdim()`, `ydim()` and `NumFrames()`.
Read the documentation or run the demo code for more details.

    auto gainSetting = speFile.metadata.PIMaxGain;
    auto xCalibrationPolynomialCoefficients = speFile.metadata.xcalibration.polynom_coeff;

A simple demonstration is included in the `demo/` directory.
Read through, compile and run it to see libSPE in action.

# Compiling your code with libSPE

The `demo/` directory contains an example of how to write a `cmake` file to compile with libSPE.
The important bits are setting the include/ directory as one of the `include_directories` and setting the location of `libspe.so` as one of the `link_directories`.
You can then create an out-of-source build for your code like described above.

If you want to use `g++` directly, compile like this,

    g++ -I /path/to/libspe/include/ -I /path/to/eigen3/ -L /path/to/libspe.so -l spe -std=c++11 mycode.cpp -o mycode

Note that the `/path/to/libspe.so` should not include `libspe.so` itself.
Run with the path set as `LD_LIBRARY_PATH` so your code can find the shared object.

    LD_LIBRARY_PATH=/path/to/libspe.so ./mycode

# Bugs

Report any bugs either through GitHub's issue tracker or directly to me through email.

# Contributing

The code is hosted on GitHub at https://github.com/dekonvoluted/libspe/.
You can either submit a pull request on GitHub, or if you don't have a GitHub account, you can email me a patch directly.
My email address is in the license header of all files in libSPE.

